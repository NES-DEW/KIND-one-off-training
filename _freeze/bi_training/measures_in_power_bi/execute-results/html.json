{
  "hash": "c3ad073f486ac578aaaf77af9b1487fa",
  "result": {
    "engine": "knitr",
    "markdown": "---\nauthor: \"Brendan Clarke, NHS Education for Scotland, [brendan.clarke2@nhs.scot](mailto:brendan.clarke2@nhs.scot)\"\ndate: \"2024-06-28\"\ntitle: \"Measures in Power BI\"\nexecute:\n  freeze: auto\ncategories: [Power BI, intermediate]\n---\n\n  \n## Previous attendees have said...  \n- 3 previous attendees have left feedback\n- 67% said that this session was pitched correctly\n- 100% would recommend this session to a colleague\n  \n:::{.callout-note}  \n### Three random comments from previous attendees  \n- Great session and good explanation of keep filters and when to use, thank you.\n- good intro to measures - possibly could have had some more complex examples for an intermediate course\n- I liked the link to the excel formula context, it helps my confidence to know I am building on my knowledge rather than learning something totally new\n  \n:::  \n\n\n\n:::{.callout-note collapse=false appearance='default' icon=true}\n## Session materials\n+ [all materials {{< iconify ph:file-zip size=2x >}}](src/measures_in_power_bi.zip)\n+ slides [{{< iconify ph:file-html size=2x >}} html](src/measures_in_power_bi.html) / [{{< iconify ph:file-pdf size=2x >}} pdf](src/measures_in_power_bi.pdf)\n+ sample files [{{< iconify simple-icons:powerbi size=2x >}} .pbix](data/ae_weeks_start.pbix) / + [{{< iconify ph:file-xls size=2x >}}.xlsx](data/excel_measures.xlsx)\n:::\n\n## Welcome\n\n+ this session is for ðŸŒ¶ðŸŒ¶ intermediate users\n+ this session can be followed practically - you'll need Power BI desktop ([plus the sample file](https://github.com/NES-DEW/KIND-training/raw/main/bi_training/data/ae_weeks_start.pbix)) to do that\n\n\n\n\n\n\n\n\n## Session outline\n\n+ DAX\n+ measures\n  + Excel measures\n  + measures vs calculated columns\n+ basic measures for data summary\n+ more complex measures for re-filtering\n\n## DAX\n\n+ **d**ata **a**nalysis e**x**pressions\n+ based on Excel formula language\n+ been in use for about 15 years, initially in Excel\n\n## Let's try one in Excel\n\n+ [sample Excel](https://github.com/NES-DEW/KIND-training/raw/main/bi_training/data/excel_measures.xlsx)\n+ PivotTable plus data model needed\n+ Measures live in tables\n+ written in DAX: `=CONCATENATEX(VALUES(Table134[Fluid spilled on patients]), Table134[Fluid spilled on patients], \",\")`\n\n## Into Power BI\n\n+ [sample file](https://github.com/NES-DEW/KIND-training/raw/main/bi_training/data/ae_weeks_start.pbix)\n+ confusingly, we find DAX in two different places...\n\n## Calculated columns\n\n+ Let's calculate an average\n+ `aver_att = AVERAGE(ae_activity[att])`\n\n## Measures\n\n+ dynamically recalculate depending on filter context\n  + so need to live on a card\n+ so same DAX = different result\n+ `aver_att_meas = AVERAGE(ae_activity[att])`\n\n\n## Basic functions for measures\n\n+ `SUM`, `AVERAGE`, `COUNT`, `MAX`\n+ measure-in-measure\n+ `&` and `ROUND`\n\n## Row-wise operations\n+ `SUMX`\n+ `CONCATENATEX` (from Excel example)\n\n## More interesting measures: filter\n\n+ `count_12 = COUNTROWS(FILTER(ae_activity, ae_activity[over12] > 20))`\n+ `FILTER` allows us to look at how parts of our data change\n\n## More interesting measures: calculate\n\n+ `count_12_calc = CALCULATE(COUNT([att]), ae_activity[over12] > 20)`\n+ `CALCULATE` changes the default filter context\n\n## More interesting measures: keepfilters\n\n+ `count_12_calc_kf = CALCULATE(COUNT([att]), KEEPFILTERS(ae_activity[over12] > 20))`\n+ `KEEPFILTERS` pokes the default filter context through into a `CALCULATE`\n\n\n\n+ [Definitive Guide to DAX](https://www.waterstones.com/book/definitive-guide-to-dax-the/marco-russo/alberto-ferrari/9781509306978)\n+ [SQLBI CALCULATE](https://www.youtube.com/watch?v=HxZLkmpY6BA)\n+ [SQLBI KEEPFILTERS](https://www.youtube.com/watch?v=Cj6rI0fRCaQ)\n\n",
    "supporting": [
      "measures_in_power_bi_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}